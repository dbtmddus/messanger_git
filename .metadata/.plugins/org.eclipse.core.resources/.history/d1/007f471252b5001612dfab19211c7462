package server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import java.nio.channels.SocketChannel;

public class server {

	public static void main(String[] args) throws IOException {

		ServerSocket server_socket = null;
		Socket soc = null;

		while (true){
			System.out.println("server is running");
			server_socket = new ServerSocket(1245);//9000번 포트로 통신하기위해 서버소켓생성
			soc = server_socket.accept();//기다리다 연결되면 accept통해 만들어지는 것이 클라이언트 소켓 

			System.out.println("client is admitted");
			System.out.println("client 정보 : "+soc.getLocalPort());
			System.out.println("server 정보 : "+soc.getRemoteSocketAddress());

			if (server_socket !=null){
				System.out.println(server_socket.toString());
				
				BufferedReader br = new BufferedReader(new InputStreamReader(soc.getInputStream()));
				String str_from_client= br.readLine();
				System.out.println(str_from_client);
			}
		}
	}
}
